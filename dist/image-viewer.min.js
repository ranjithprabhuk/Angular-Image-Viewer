!function(){"use strict";angular.module("imageViewer",[]).directive("imageViewer",function(){return{restrict:"EA",template:'<div style="padding:10px;">                <button id="girardir" class="btn btn-primary btn-lg" ng-disabled="noImage"><span class="glyphicon glyphicon-menu-left"> </span> Rotate to Left</button>                <button id="giraresq" class="btn btn-primary btn-lg" ng-disabled="noImage">Rotate to Right <span class="glyphicon glyphicon-menu-right"> </span></button>                <button id="zoomIn" class="btn btn-info btn-lg" ng-disabled="noImage"><span class="glyphicon glyphicon-zoom-in"> </span> Zoom In</button>                <button id="zoomOut" class="btn btn-info btn-lg" ng-disabled="noImage"><span class="glyphicon glyphicon-zoom-out"> </span> Zoom Out</button>                <button id="carregar" class="btn btn-warning btn-lg" ng-disabled="noImage"><span class="fa fa-arrow-left"> </span> Reset</button>                </div>				<div id="image-zoom" style="padding:10px;">				<h2 class="text-center text-danger" id="error-message" style="border:1px solid #000;display:none;padding:20px">Image Not Available</h2>                <canvas id="canvas" height="650" data-girar="0" style="border:1px solid #000;z-index:555555;cursor:grab;">sdsd</canvas>                <img ng-src="{{image}}" id="image" style="display:none" /> </div>',link:function(n,e,t){function a(){c=document.getElementById("image"),e=s.getContext("2d"),d=0,m=1,b=0,n.flag?(n.flag=0,e.translate(s.width/2,s.height/2)):e.translate(0,0),o(),angular.element("#canvas").attr("data-girar",0),console.log("loaded successfully!!!")}function o(){i(),e.save(),e.scale(m,m),e.rotate(b*Math.PI/180),e.drawImage(c,-c.width/2,-c.height/2),e.restore()}function i(){e.clearRect(-2e3,-2e3,5e3,5e3)}function l(n,e){var t=n.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}n.image=t.src,n.noImage=!1;var r,g,s=document.getElementById("canvas"),c=document.getElementById("image"),e=s.getContext("2d"),d=0,u=.1,m=1,b=0,p=!1;n.flag=1,setTimeout(function(){s.width=angular.element("#image-zoom").width(),document.getElementById("carregar").click()},0),angular.element("#carregar").click(function(){angular.element("#image").on("load",a()).on("error",function(){angular.element("#canvas").hide(),n.noImage=!0,angular.element("#error-message").show(),console.log("error loading image")})}),angular.element("#giraresq").click(function(){d=5,b+=d,o()}),angular.element("#girardir").click(function(){d=-5,b+=d,o()}),angular.element("#zoomIn").click(function(){m+=u,o()}),angular.element("#canvas").bind("mousewheel DOMMouseScroll",function(n){n.originalEvent.wheelDelta>0||n.originalEvent.detail<0?(m+=u,o()):m-u-.1>0&&(m-=u,o())}),angular.element("#zoomOut").click(function(){m-=u,o()}),s.onmousedown=function(n){var e=l(s,n);r=e.x,g=e.y,p=!0},s.onmousemove=function(n){if(p===!0){var t=l(s,n),a=t.x,i=t.y;e.translate(a-r,i-g),o(),r=a,g=i}},window.onmouseup=function(n){p=!1}}}})}();